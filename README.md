# Home-Automation: Thinking Differently
With the emergence of the IOT [(Internet of Things)](https://en.wikipedia.org/wiki/Internet_of_things) , automation has become a part and parcel of our daily lives. Starting from lights and fans, people have started to automate almost everything around them. After software giants like Amazon and Google started providing cloud services, people came to use the free resources provided by them to store/log their data and manage them from a distance even without having direct physical contact with the devices.
After this was pretty well-exploited, people started combining the power of machine learning with the existing technology. With rapid improvement in hardware and GPU's becoming cheap, it has become quite easy for an individual to learn, test out and contribute to the advancement of machine learning. Powerful methods like use of [deep learning](https://en.wikipedia.org/wiki/Deep_learning) in visual image processing, natural langugage processing etc has made this existing technology even more smarter. Popular home assistants like Amazon [Alexa](https://developer.amazon.com/alexa) etc, by making their API's open sourced have encouraged development in home automation even more.
# Why re-invent the wheel then ?
You might ask, well a lot of people have spent years writing and perfecting their techniques, why not build our application atop them ? Why do we even need to think about something from scratch where we have already progressed so far ? The answer is very simple, in fact this the reason for which we took up this project. We couldn't agree well with the existing idea of automation. I know, there are some brilliant projects out there at Instructables, Hackaday and Hackster etc where people have put a lot of effort making a very neat and appealing project and I appreciate their effort. See, controlling lights, fans, switches and other power ports using bluetooth, WiFi and other technologies through a custom designed Android/iOS application may be excellent but they are over exploited already. Yeah, you can switch on your Television and washing machine, turn off the radio, feed your pet, monitor the weather while sitting on your couch while watching your favourite series on Netflix but this has already been done, right ? We are already living those days, What if your TV knew when do you watch it mostly ? What if your lights and fans knew when to turn on and when not to so they could save the maximum power when you are not in in your room ? This is exactly what we do here.
# The Idea
Keeping aside all big talks, what we aim to achieve here is simple, design a system that learns to map user behaviour. Citing a small example here, Suppose, you live alone in small apartment, you wake up at 7:00 AM, do your daily chores, leave for office at 8:00 and return home at 7:00 PM, now suppose there are three appliances in a room of your house, lets call them **LIGHT 1**, **LIGHT 2** and **Fan**, after waking up and before leaving for your office suppose you use light 1 and the fan. After returning from office you use all three of the appliances, lets suppose you dont have many switches in the room so you don't have much room for exploring more options, so you follow a similar routine everyday. What our system will do is, it will learn when and how much you used the appliance and from the very next day try to follow the same routine as followed by you the previous days. 
# The Brief Technicalities
Its time for us now, to dive into brief technical details. Our application is actually a room automation module which is used to automate your room, this module provides a drop in replacement for your switchboard so that you do not need to touch your switch board again. The form factor of the module will be so made that it retro-fits behind your switchboard. You can then control the functionalities of the physical switches of your switchboard through a smartphone application, just like any other home automation device. But Wait! There is much more to it. Apart, from controlling them at your own will from the smartphone application you can very well control them by the physical switches if you like. We are not taking away your rights over your switchboard! This, comes in handy if the module or the smartphone application goes haywire, you can anyway use your switches without any worry. Wait, There is even more! The system takes into account your choices of switching appliances on and off both through the physical switches and through the smartphone device. After it has gathered enough data and after you allow it to, it will predict what appliance you might switch on at a certain time of the day and switches on that appliance. Its like, you come home everyday at 7:00 PM and switch on the fan hanging over your sofa, but one day you find out as soon as you come home at or after 7:00 PM the fan switches on by itself!
# Some Additional features
1. A lot of features have been mentioned already but what i would like to add here is, such a system works by mapping user action throughout the day and reproducing them later. Well, you might say, OK, I agree that someone can maintain some coherence in his/her routine for a day or two, but someone cannot follow the same pattern for days after days, for heavens's sake we are not machines! We, too thought about this, how you will deal with your home appliances tomorrow cannot be exactly predicted by observing how you dealt with them today, we can only get a rough idea. If you observe someone for a day, the conclusion you will reach will be an abstarct idea, like "Ohh,so he likes to leave all lights on during the night", or maybe something like this, "Ohh he switches on more tubelights in the night than in the day". These are all rough estimates which might be true for a day or two but cannot be guaranteed over a longer period of time. So, How do you get make good estimtes ? Well you keep a watch more frequently and try to understand how much the behaviour of the user differ each day and update your observation accordingly. Our system exactly does that, it keeps a note of your usage behaviour very frequently and tries to draw and inference from that, after a day is over it updates its observations.
2. Since, the system follows the user's behaviour and updates itself as soon as the user's behaviour changes, the device isnt affected by the change of seasons, timezones, geographic locations etc. It all depends on how you use it. 
# How is it being done ?
Before starting, let me tell you quite frankly, that the idea is still in the developmental stage and a lot of community help is required to further polish it. Only a working prototype is being developed here. Our goal is to make a small easy-to-interface embedded module made from commonly available parts which will be having enough intelligence to provide descisions based on observing a particular user.
Lets, talk about the hardware first, We are using [ESP8266-ESP12](https://www.elecrow.com/download/ESP-12S_User_Manual.pdf) [Wemos D1 Mini](https://wiki.wemos.cc/products:retired:d1_mini_v2.2.0) here. Three pins are configured as outputs for controlling a relay through a BJT (Bipolar Junction Transistor) or probably a MOSFET in the future, for switching high voltage appliances. A PIR (Passive Infrared Sensor) is used to detect the occupancy of a person in the room, the output of the PIR sensor is fed to a pin configured as input. Also, for storing the data permanently an i2c FRAM will be used, FRAM being chosen particularly because of its fast write time and very large read/write cycles as compared to eeprom or flash memory. The schematic and the pcb design files will be present in their approopriate directory.
The software used to program the Esp is micropython. They are seriously brilliant guys who made micropython possible. I would suggest you to take a look at ther [repository](https://github.com/micropython/micropython) for more information. The software will manage all the afore mentioned hardware. A small single neural network with a single hidden layer will take care of the descision making process. 
A smartphone application is being developed too for user access through a smartphone. All the methodologies taken up and the codes are properly explained in the README's of their respective directories.
A server side script which the ESp8266 and the smartphone application will ping which will enable the user to acces the home appliances from anywhere in the world, will be written in python. We intend to buy a domain for this purpose too.
We will try to follow the below mentioned tree:

    ----root
        |---- Micropython
                |----Micropython files for the ESP
        |----Front End
                |----SmartPhone Application codes
        |----Back End
                |----Server side scripts 
        |----Hardware
                |----Schematics, datasheets and pcb design files


# Support
We would appreciate any help provided from your side in designing and developing this idea. We also welcome all kinds of comments and suggestions provided to us.
